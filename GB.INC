;	GB.INC
;	1994.7.23

;子程序:取当前页光标位置
S_DQGB		PROC	NEAR
		XOR	BX,BX
		MOV	DS,BX			;0→DS
		MOV	BL,DS:[462H]
		XOR	BH,BH
		SHL	BX,1
		MOV	DX,DS:[BX+450H]
		RET
S_DQGB		ENDP

;子程序:光标管理
S_GB		PROC	NEAR
		TEST	BYTE PTR CS:[101H],1	;光标开?
		JZ	L_GB2
		PUSH	AX
		PUSH	BX
		PUSH	CX
		PUSH	DX
		CALL	S_DQGB

		XCHG	DX,CS:D_0068
		CMP	BYTE PTR CS:[102H],0
		JZ	L_GB1
		CALL	S_XSGB
L_GB1:		MOV	DX,CS:D_0068
		CALL	S_XSGB

		POP	DX
		POP	CX
		POP	BX
		POP	AX
L_GB2:		RET
S_GB		ENDP

;子程序:清除光标
S_QGB		PROC	NEAR
		TEST	BYTE PTR CS:[101H],1	;光标开?
		JZ	L_QGB1
		CMP	BYTE PTR CS:[102H],0
		JZ	L_QGB1
		PUSH	AX
		PUSH	BX
		PUSH	CX
		PUSH	DX
		MOV	DX,CS:D_0068
		CALL	S_XSGB

		POP	DX
		POP	CX
		POP	BX
		POP	AX
L_QGB1: 	RET
S_QGB		ENDP

;子程序:显光标
S_XGB		PROC	NEAR
		TEST	BYTE PTR CS:[101H],1	;光标开?
		JZ	L_XGB1
		CMP	BYTE PTR CS:[102H],0
		JNZ	L_XGB1
		PUSH	AX
		PUSH	BX
		PUSH	CX
		PUSH	DX
		CALL	S_DQGB
		MOV	CS:D_0068,DX		; 7.23
		CALL	S_XSGB

		POP	DX
		POP	CX
		POP	BX
		POP	AX
L_XGB1: 	RET
S_XGB		ENDP

