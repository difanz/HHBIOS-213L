;	LHELP.ASM
;	1997.2.20, 3.21, 6.29, 7.31
;	1998.4.8
;	1999.1.13

CSEG		SEGMENT
		ASSUME	CS:CSEG, DS:CSEG

		ORG	100H
START:		JMP	BEGIN

D_FILE		DW	0			;ļ
D_MODE		DB	0			;ʾʽ
D_WIN		DB	0			;ǰں
D_B1		DB	'ͻ',0
D_B2		DB	' ',0
D_B3		DB	'ͼ',0
D_CDXZ		DB	4FH			;˵ѡɫ
D_TS		DB	' ALT+רü| -ƶ,:INS+,DEL-.ǰ:HOME+,END-.߿:PGUP+,PGDN-,:+',0
D_ALT		DB	0			;ALT־
K_NUM		DB	14			;Ӵ
H_MAIN		DB	1			;˵ǰ

K_MAIN		DB	1EH			;˵ɫ
		DB	1EH			;ɫ
		DW	1218H			;˵ڴС
		DW	204H			;	   Ͻλ

K_ZFB		DB	6FH			;ַ
		DB	6EH
		DW	1325H
		DW	410H

K_KZASC 	DB	57H			;չASC
		DB	5AH
		DW	182FH
		DW	18H

K_GQHZ		DB	61H			;
		DB	6BH
		DW	0E28H
		DW	610H

K_SPDM		DB	4AH			;˫ƴ
		DB	4EH
		DW	122FH
		DW	315H

K_YS		DB	2AH			;ǰɫ
		DB	2FH
		DW	133DH
		DW	410H

K_XSFS		DB	67H			;ʾʽ
		DB	6FH
		DW	946H
		DW	808H

K_SLZT		DB	52H			;ʸ
		DB	5EH
		DW	1130H
		DW	515H

K_ZXZH		DB	21H			;ֺ
		DB	2FH
		DW	174AH
		DW	103H

K_XTPB		DB	4FH			;ϵͳŰ
		DB	4EH
		DW	183FH
		DW	0AH

K_TSXS		DB	1EH			;ʾ
		DB	1FH
		DW	144DH
		DW	101H

K_TSDY		DB	1EH			;ӡ
		DB	1FH
		DW	1447H
		DW	206H

K_INT10 	DB	1EH			;ʾж
		DB	1FH
		DW	164EH
		DW	101H

K_QTINT 	DB	1EH			;ж
		DB	1FH
		DW	174EH
		DW	201H

K_GNJ		DB	30H			;ܼ÷
		DB	30H
		DW	0D39H
		DW	910H

D_BT		DB	' !2.13L ϵͳ!',0
		DB	' ',0
D_CD		DB	'ASCIIַ         ',0        ;ZFB
		DB	'չASCII       ',0        ;KZASC
		DB	'λ            ',0        ;GQHZ
		DB	'˫ƴ          ',0        ;SPDM
		DB	'ʾ16ǰɫ',0        ;YS
		DB	'ʾʽһ      ',0        ;XSFS
		DB	'ʸֿ',0        ;SLZT
		DB	'ֺű        ',0        ;ZXZH
		DB	'Űӡ    ',0        ;XTPB
		DB	'ʾ        ',0        ;TSXS
		DB	'ӡ        ',0        ;TSDY
		DB	'ʾжϹܵ    ',0        ;INT10
		DB	'̺ʹӡжϵ  ',0        ;QTINT
		DB	'ģ鹦ܼ÷    ',0,0      ;GNJ

D_XZ		DW	OFFSET S_ZFB
		DW	OFFSET S_KZASC
		DW	OFFSET S_GQHZ
		DW	OFFSET S_SPDM
		DW	OFFSET S_YS
		DW	OFFSET S_XSFS
		DW	OFFSET S_SLZT
		DW	OFFSET S_ZXZH
		DW	OFFSET S_XTPB
		DW	OFFSET S_TSXS
		DW	OFFSET S_TSDY
		DW	OFFSET S_INT10
		DW	OFFSET S_QTINT
		DW	OFFSET S_GNJ
		DW	0

L_HELP		PROC	FAR
		PUSH	DS
		PUSH	ES
		PUSH	CS
		POP	DS
		PUSH	CS
		POP	ES

		MOV	CX,2000H
		MOV	AH,1			;ع
		INT	10H
L_40:
		MOV	AL,D_WIN
		OR	AL,AL
		JNZ	L_55
L_44:
		MOV	DI,OFFSET K_MAIN
		CALL	S_XSCK			;ʾմ
		MOV	SI,OFFSET D_BT		;⼰˵
		CALL	S_CKXS102
L_50:
		MOV	CH,K_NUM		;
		MOV	CL,21			;
		INC	DH			;˵λ
		MOV	D_DX,DX
		MOV	DH,H_MAIN		;ĬϺ
		MOV	BP,OFFSET D_CD		;˵
		CALL	S_CDKZ			;˵

		CMP	D_ALT,0FFH		;ALT
		JZ	L_44
		CMP	AL,1BH			;ESC
		JZ	L_RET
L_55:
		MOV	H_MAIN,AL
		MOV	D_WIN,AL
L_60:
		CBW
		DEC	AX
		SHL	AX,1
		MOV	BX,AX
		CALL	D_XZ[BX]		;ִиӳ

		CMP	D_ALT,0 		;ALT
		JZ	L_62
		MOV	AL,D_WIN
		OR	AL,AL
		JNZ	L_60
l_62:
		MOV	D_WIN,0
		JMP	SHORT L_44
L_RET:
		MOV	AX,1406H
		INT	10H
		MOV	AX,1813H		;ָĻ
		TEST	DL,80H
		JZ	L_RET1
		MOV	AL,23
L_RET1:
		INT	10H
		MOV	CX,0E0FH
		MOV	AH,1			;
		INT	10H
		POP	ES
		POP	DS
		RET
L_HELP		ENDP

;ӳ==================================================================
D_K		DW	0			;
D_G		DW	0			;
;ӳ:ʾմ DI=ڲ(ɫ,ʾɫ,ڴС,Ͻ)
S_XSCK		PROC	NEAR
		MOV	BL,[DI] 		;ɫ
		MOV	CX,[DI+2]		;С
		MOV	DX,[DI+4]		;Ͻ
		PUSH	DX
		SUB	CX,202H
		MOV	AL,CH
		CBW
		MOV	D_G,AX			;ڸ
		MOV	AL,CL
		MOV	D_K,AX			;      

		XOR	CX,CX
		MOV	SI,OFFSET D_B1		;Ϻ
		CALL	S_XSYH

		MOV	SI,OFFSET D_B2		;м
		MOV	BP,D_G
L_CK1:
		INC	DH
		CALL	S_XSYH
		DEC	BP
		JNZ	L_CK1
		INC	DH
		CMP	DH,18H
		JA	L_CK3
		MOV	SI,OFFSET D_B3		;º
		CALL	S_XSYH

		ADD	DX,101H
		CMP	D_MODE,9		;е?
		JBE	L_CK3
		CMP	DH,18H			;?
		JA	L_CK3
		MOV	BX,2000H		;Ӱ
		MOV	BP,D_K
		ADD	BP,2
L_CK2:
		CALL	S_XSZF
		DEC	BP
		JNZ	L_CK2
L_CK3:
		MOV	BL,[DI+1]		;ʾɫ
		POP	DX
		RET
;ӳ:ʾһ:
S_XSYH:
		PUSH	DX
		PUSH	BP
		MOV	BH,[SI] 		;
		CALL	S_XSZF
		MOV	BH,[SI+1]		;м
		MOV	BP,D_K
L_YH1:
		CALL	S_XSZF
		DEC	BP
		JNZ	L_YH1
		MOV	BH,[SI+2]		;ұ
		CALL	S_XSZF
		CMP	D_MODE,9		;е?
		JBE	L_YH2
		CMP	SI,OFFSET D_B1		;Ϻ?
		JZ	L_YH2
		CMP	DL,80			;еұ?
		JZ	L_YH2
		PUSH	BX
		MOV	BX,2000H		;ұӰ
		CALL	S_XSZF
		POP	BX
L_YH2:
		POP	BP
		POP	DX
		RET
S_XSCK		ENDP

;ӳ:ʾSI(ÿβ0,ټ0),DX=λ,BL=
S_CKXS102	PROC	NEAR
		ADD	DX,102H
S_CKXS:
		MOV	CX,1
		PUSH	DX
L_CKXS1:
		CMP	BYTE PTR [SI],0 	;?
		JZ	L_CKXS2
		PUSH	DX
		CALL	S_XSZFC 		;ʾһ
		POP	DX
		INC	DH
		JMP	SHORT L_CKXS1
L_CKXS2:
		POP	DX
		RET
S_CKXS102	ENDP

;ӳ:
S_INPUT 	PROC	NEAR
		MOV	D_ALT,0 		;־
		MOV	AX,2B10H		;BIOS
		INT	16H
		PUSH	AX
		MOV	AL,6
		MUL	D_WIN
		ADD	AX,OFFSET K_MAIN
		MOV	SI,AX
		POP	AX

		CMP	AH,98H			;ALT+
		JNZ	L_IN1
		MOV	DL,[SI+5]
		OR	DL,DL
		JZ	L_IN00
		DEC	DL
		MOV	[SI+5],DL
L_IN00:
		NOT	D_ALT			;ñ־
		RET
L_IN1:
		CMP	AH,0A0H 		;ALT+
		JNZ	L_IN2
		MOV	DL,[SI+5]		;Ͻ
		ADD	DL,[SI+3]		;+
		CMP	DL,25			;?
		JAE	L_IN10
		INC	BYTE PTR [SI+5]
L_IN10:
		JMP	L_IN00
L_IN2:
		CMP	AH,9BH			;ALT+
		JNZ	L_IN3
		MOV	DL,[SI+4]
		OR	DL,DL
		JZ	L_IN20
		DEC	DL
		MOV	[SI+4],DL
L_IN20:
		JMP	L_IN00
L_IN3:
		CMP	AH,9DH			;ALT+
		JNZ	L_IN4
		MOV	DL,[SI+4]
		ADD	DL,[SI+2]
		CMP	DL,80
		JAE	L_IN30
		INC	BYTE PTR [SI+4]
L_IN30:
		JMP	L_IN00
L_IN4:
		CMP	AH,0A2H 		;ALT+INS*	ɫ+
		JNZ	L_IN5
		ADD	BYTE PTR [SI],10H
		ADD	BYTE PTR [SI+1],10H
		JMP	L_IN00
L_IN5:
		CMP	AH,0A3H 		;ALT+DEL*	ɫ-
		JNZ	L_IN6
		SUB	BYTE PTR [SI],10H
		SUB	BYTE PTR [SI+1],10H
		JMP	L_IN00
L_IN6:
		CMP	AH,97H			;ALY+HOME*	ǰɫ+
		JNZ	L_IN7
		MOV	DL,[SI+1]
		MOV	DH,DL
		AND	DH,0F0H
		INC	DL
		AND	DL,0FH
		OR	DL,DH
		MOV	[SI+1],DL
		JMP	L_IN00
L_IN7:
		CMP	AH,9FH			;ALT+END*	ǰɫ-
		JNZ	L_IN8
		MOV	DL,[SI+1]
		MOV	DH,DL
		AND	DH,0F0H
		DEC	DL
		AND	DL,0FH
		OR	DL,DH
		MOV	[SI+1],DL
		JMP	L_IN00
L_IN8:
		CMP	AH,99H			;ALT+PGUP*	߿ɫ+
		JNZ	L_IN9
		MOV	DL,[SI]
		MOV	DH,DL
		AND	DH,0F0H
		INC	DL
		AND	DL,0FH
		OR	DL,DH
		MOV	[SI],DL
		JMP	L_IN00
L_IN9:
		CMP	AH,0A1H 		;ALT+PGDN*	߿ɫ-
		JNZ	L_INA
		MOV	DL,[SI]
		MOV	DH,DL
		AND	DH,0F0H
		DEC	DL
		AND	DL,0FH
		OR	DL,DH
		MOV	[SI],DL
		JMP	L_IN00
L_INA:
		CMP	AH,0A6H 		;ALT+ENTER*	ʾʾ
		JNZ	L_INB
		MOV	AX,1400H
		INT	10H
		MOV	SI,OFFSET D_TS
		MOV	BX,1EH
L_INA0:
		LODSB
		OR	AL,AL
		JZ	L_INA1
		MOV	DL,AL
		MOV	AX,1403H
		INT	10H
		JMP	SHORT L_INA0
L_INA1:
		JMP	S_INPUT
L_INB:
		CMP	AH,4EH			;ALT+'+'*       ô
		JNZ	L_INC
		MOV	AH,51H			;ȡPSP
		INT	21H
		PUSH	BX			;
		MOV	BX,CS
		MOV	AH,50H			;ǰPSP
		INT	21H
		MOV	DX,D_FILE		;ļ(·)
		MOV	DS,DS:[2CH]
		MOV	CX,20H
		MOV	AH,3CH			;ؽļ
		INT	21H
		MOV	BX,AX
		PUSH	CS
		POP	DS
		MOV	DX,100H
		MOV	CX,OFFSET D_END-100H
		MOV	AH,40H			;д
		INT	21H
		MOV	AH,3EH			;ر
		INT	21H
		POP	BX			;ָ
		MOV	AH,50H			;ǰPSP
		INT	21H
		JMP	S_INPUT
L_INC:
		RET
S_INPUT 	ENDP

D_DH		DB	1			;ʼѡ
D_DX		DW	0			;λ
;ӳ:˵ơַBP,CH,CL(0),D_DX=λ
;		    AL=ѡ
S_CDKZ		PROC	NEAR
L_CD10:
		CALL	S_XCD
		CALL	S_INPUT 		;
		CMP	D_ALT,0FFH		;ALT
		JZ	L_CD20
		CMP	AL,1BH			;ESC?
		JZ	L_CD20
		CMP	AL,' '
		JZ	L_CD20
		CMP	AL,0DH			;س
		JNZ	L_CD30
		MOV	AL,DH			;ѡ
L_CD20:
		RET
L_CD30:
		CMP	AH,80			;
		JNZ	L_CD50
		CALL	S_QCD			;ԭʾ
		CMP	DH,CH			;ѵ?
		JZ	L_CD40
		INC	DH			;1
		JMP	SHORT L_CD10
L_CD40:
		MOV	DH,1			;1
		JMP	SHORT L_CD10
L_CD50:
		CMP	AH,72			;
		JNZ	L_CD10
		CALL	S_QCD			;ԭʾ
		CMP	DH,1			;=1?
		JZ	L_CD60
		DEC	DH			;1
		JMP	SHORT L_CD10
L_CD60:
		MOV	DH,CH			;
		JMP	SHORT L_CD10
;ӳ:λʾ˵
S_QCD:						;˵
		MOV	BL,K_MAIN+1		;ͨʾɫ
		JMP	SHORT L_XCD
S_XCD:						;д˵
		MOV	BL,D_CDXZ		;˵ѡɫ
L_XCD:
		PUSH	CX
		PUSH	DX
		MOV	AL,CL			;
		MUL	DH			;*
		XOR	CH,CH
		SUB	AX,CX
		ADD	AX,BP
		MOV	SI,AX			;
		ADD	DH,BYTE PTR D_DX+1	;
		MOV	DL,BYTE PTR D_DX	;
		CALL	S_XSZFC 		;ʾַ
		POP	DX
		POP	CX
		RET
S_CDKZ		ENDP

;ӳ:ʾַBH,λDX(ʾ+1
S_XSZF		PROC	NEAR
		PUSH	BX
		CMP	D_MODE,9		;е?
		JA	L_XF1
		CMP	BL,70H			;з?
		JZ	L_XF1
		MOV	BL,7
L_XF1:
		MOV	AX,1409H		;ʾ
		INT	10H
		INC	DX			;+1
		POP	BX
		RET
S_XSZF		ENDP

;ӳ:ʾַSI,β0,BL=
S_XSZFC 	PROC	NEAR
		LODSB
		OR	AL,AL			;н?
		JZ	L_X4
		CMP	AL,'!'                  ;?
		JNZ	L_X3
		CMP	D_MODE,9		;е?
		JBE	L_X1
		CALL	S_BL
		JMP	SHORT S_XSZFC
L_X1:
		CMP	BL,70H			;ԭ?
		JZ	L_X2
		MOV	BL,70H
		JMP	SHORT S_XSZFC
L_X2:
		MOV	BL,7
		JMP	SHORT S_XSZFC
L_X3:
		MOV	BH,AL
		CALL	S_XSZF			;ʾַ
		JMP	SHORT S_XSZFC
L_X4:
		RET
S_BL:
		ROR	BL,1			;ǰ
		ROR	BL,1
		ROR	BL,1
		ROR	BL,1
		RET
S_XSZFC 	ENDP

;ӳ:ҳ DL=ҳ,DH=ǰ
S_PAGE		PROC	NEAR
		CALL	S_INPUT 		;
		CMP	D_ALT,0FFH		;ALT
		JZ	L_P00
		CMP	AL,1BH			;ESC?
		JNZ	L_P0
		POP	AX
		POP	AX
		JMP	L_RET
L_P0:
		OR	AL,AL
		JZ	L_P1
		CMP	AL,80H			;س?
		JAE	L_P1
L_P00:
		POP	AX
		RET
L_P1:
		MOV	AL,DH
		CMP	AH,72			;
		JZ	L_P2
		CMP	AH,73			;PGUP
		JNZ	L_P4
L_P2:
		OR	AL,AL
		JNZ	L_P3
		MOV	AL,DL
		RET
L_P3:
		DEC	AX
		RET
L_P4:
		CMP	AH,80			;
		JZ	L_P5
		CMP	AH,81			;PGDN
		JNZ	S_PAGE
L_P5:
		CMP	AL,DL
		JNZ	L_P6
		XOR	AL,AL
		RET
L_P6:
		INC	AX
		RET
S_PAGE		ENDP

;ӳ:мӿʾES:SI ڲ:DI(DI+2-ڿ)
S_XSBT		PROC	NEAR
		PUSH	SI
		XOR	CX,CX
L_BT1:
		LODSB
		OR	AL,AL			;дβ?
		JZ	L_BT2
		INC	CX
		JMP	SHORT L_BT1
L_BT2:
		POP	SI

		SHL	CL,1			;*2
		MOV	CH,[DI+2]		;ڿ
		SUB	CH,CL
		SHR	CH,1			;

		PUSH	DX
		PUSH	BX
		ADD	DL,CH
		CALL	S_BL
		MOV	AX,140FH		;ʾַ
		INT	10H
		POP	BX
		POP	DX
		RET
S_XSBT		ENDP
;============================================================================
D_16		DB	'0123456789ABCDEF',0
T_ASC		DB	'ASCII ַ',0
D_ZF		DB	0			;ǰַ

S_ZFB		PROC	NEAR
		MOV	DI,OFFSET K_ZFB
		CALL	S_XSCK			;ʾ
		MOV	SI,OFFSET T_ASC
		CALL	S_XSBT			;ʾ
		XOR	CX,CX
		MOV	SI,OFFSET D_16		;'0123456789ABCDEF'
		PUSH	DX
		ADD	DX,104H
L_ZFB1:
		LODSB
		OR	AL,AL			;?
		JZ	L_ZFB2
		MOV	BH,AL			;ַ
		CALL	S_XSZF
		MOV	BH,' '                  ;ո
		CALL	S_XSZF
		JMP	SHORT L_ZFB1
L_ZFB2:
		POP	DX
		ADD	DX,202H

		MOV	SI,OFFSET D_16		;'0123456789ABCDEF'
		MOV	D_ZF,0
L_ZFB3:
		LODSB
		OR	AL,AL			;?
		JZ	L_INRET
		PUSH	DX
		MOV	BH,AL			;ַ
		CALL	S_XSZF
		MOV	BH,' '                  ;ո
		CALL	S_XSZF
		MOV	DI,16
L_ZFB4:
		MOV	BH,D_ZF 		;ǰַ
		CALL	S_XSZF
		MOV	BH,' '                  ;ո
		CALL	S_XSZF
		INC	D_ZF			;ַ+1
		DEC	DI
		JNZ	L_ZFB4
		POP	DX
		INC	DH
		JMP	SHORT L_ZFB3
L_INRET:
		CALL	S_INPUT 		;벢
		CMP	AL,1BH
		JZ	L_INRET1
		RET
L_INRET1:
		POP	AX
		JMP	L_RET
S_ZFB		ENDP
;----------------------------------------------------------------------------
T_KZASC 	DB	'չASCII',0
D_KZASC 	DB	'0FH-SHIFT+TAB  10H-19H:ALT+QWERTYUIOP',0
		DB	'1EH-26H:ALT+ASDFGHJKL   2CH-32H:ALT+ZXCVBNM',0
		DB	'3BH-44H:F1~F10 47H-HOME       48H-UP',0
		DB	'49H-PGUP       4AH-ALT+"-"  4BH-LEFT',0
		DB	'4DH-RIGHT    4EH-ALT+"+"  4FH-END',0
		DB	'50H-DOWN     51H-PGDN       52H-INS',0
		DB	'53H-DEL        54H-5DH:SHIFT+F1~F10',0
		DB	'5EH-67H:CTRL+F1~F10     68H-71H:ALT+F1~F10',0
		DB	'72H-CTRL+PRTSC 73H-CTRL+    74H-CTRL+',0
		DB	'75H-CTRL+END   76H-CTRL+PGDN  77H-CTRL+HOME',0
		DB	'78H-83H:ALT+1~0,-,=           84H-CTRL+PGUP',0
		DB	'85H-F11        86H-F12        87H-SHIFT+F11',0
		DB	'88H-SHIFT+F12  89H-CTRL+F11   8AH-CTRL+F12',0
		DB	'8BH-ALT+F11    8CH-ALT+F12    8DH-CTRL+',0
		DB	'8EH-CTRL+"-"   8FH-CTRL+5     90H-CTTRL+"+"',0
		DB	'91H-CTRL+    92H-CTRL+INS   93H-CTRL+DEL',0
		DB	'94H-CTRL+TAB   95H-CTRL+/   96H-CTRL+*',0
		DB	'97H-ALT+HOME 98H-ALT+   99H-ALT+PGUP',0
		DB	'9BH-ALT+   9DH-ALT+   9FH-ALT+END',0
		DB	'A0H-ALT+   A1H-ALT+PGDN A2H-ALT+INS',0
		DB	'A3H-ALT+DEL  A4H-ALT+/    A5H-ALT+TAB',0
		DB	'A6H-ALT+ENTER         СΪרС',0,0

S_KZASC 	PROC	NEAR
		MOV	DI,OFFSET K_KZASC
		CALL	S_XSCK			;ʾ
		MOV	SI,OFFSET T_KZASC
		CALL	S_XSBT			;ʾ
		MOV	SI,OFFSET D_KZASC
L_XSINRET:
		CALL	S_CKXS102		;ʾ
		JMP	L_INRET
S_KZASC 	ENDP
;----------------------------------------------------------------------------
T_QWXS		DB	'ʾ',0
D_QW		DB	'16          ',0
		DB	'  1600            ',0
		DB	'  1610          ',0
		DB	'  1620          ',0
		DB	'  1630          ',0
		DB	'  1640          ',0
		DB	'  1650          ',0
		DB	'  1660          ',0
		DB	'  1670          ',0
		DB	'  1680          ',0
		DB	'  1690                    ',0
		DB	'!,,<ESC>˵.!',0,0
D_Q		DB	16			;

S_GQHZ		PROC	NEAR
		MOV	DI,OFFSET K_GQHZ
		CALL	S_XSCK			;ʾ
		MOV	SI,OFFSET T_QWXS
		CALL	S_XSBT			;ʾ
		ADD	DX,102H
L_GQHZ1:
		MOV	AL,D_Q			;
		CBW
		MOV	CL,10
		DIV	CL
		OR	AX,3030H		;ʮ
		MOV	SI,OFFSET D_QW+2
		MOV	CX,11
L_GQHZ2:
		MOV	[SI],AX 		;д
		ADD	SI,37			;һ
		LOOP	L_GQHZ2

		PUSH	BX
		PUSH	DX
		MOV	DI,OFFSET D_QW+37
		MOV	BL,10
		XOR	DH,DH			;λ
L_GQHZ3:
		ADD	DI,7
		MOV	BH,10
L_GQHZ4:
		CMP	DH,94
		JA	L_GQHZ5
		OR	DH,DH
		JNZ	L_GQHZ6
L_GQHZ5:
		MOV	AX,'  '
		JMP	SHORT L_GQHZ7
L_GQHZ6:
		MOV	DL,D_Q			;
		MOV	AX,DX
		ADD	AX,0A0A0H		;
L_GQHZ7:
		STOSW				;д
		INC	DI
		INC	DH
		DEC	BH
		JNZ	L_GQHZ4
		DEC	BL
		JNZ	L_GQHZ3
		POP	DX
		POP	BX

		MOV	SI,OFFSET D_QW
		CALL	S_CKXS			;ʾ
L_GQHZ8:
		MOV	BH,D_Q
		CALL	S_INPUT 		;ȡ
		CMP	D_ALT,0FFH		;ALT
		JZ	L_GQHZA
		CMP	AL,1BH			;ESC?
		JNZ	L_GQHZ9
		POP	AX
		JMP	L_RET
L_GQHZ9:
		CMP	AL,0DH			;˵
		JNZ	L_GQHZB
L_GQHZA:
		RET
L_GQHZB:
		CMP	AH,75			;
		JZ	L_GQHZC
		CMP	AH,80			;
		JNZ	L_GQHZD
L_GQHZC:
		DEC	BH
		CMP	BH,1
		JNB	L_GQHZF
		MOV	BH,87
		JMP	SHORT L_GQHZF
L_GQHZD:
		CMP	AH,72			;
		JZ	L_GQHZE
		CMP	AH,77			;
		JNZ	L_GQHZ8
L_GQHZE:
		INC	BH			;+1
		CMP	BH,95
		JB	L_GQHZF
		MOV	BH,1
L_GQHZF:
		MOV	D_Q,BH
		JMP	L_GQHZ1
S_GQHZ		ENDP
;----------------------------------------------------------------------------
T_SP		DB	'˫ƴ',0
D_SP		DB	'ĸzh-V     ch-I      sh-U',0
		DB	'ĸ          i-I       u-U     -V',0
		DB	'      a-A      ia-R *    ua-W ',0
		DB	'      o-O      uo-O',0
		DB	'      e-E      ie-T             e-W',0
		DB	'      ai-L               uai-Y',0
		DB	'      ei-D               ui-V',0
		DB	'      ao-K    iao-M ',0
		DB	'      ou-P    iu-Q',0
		DB	'      an-J    ian-B    uan-Z  an-Z',0
		DB	'      en-F    in-N     un-C   n-C',0
		DB	'      ang-H   iang-X   uang-X',0
		DB	'      eng-G   ing-Y Ӣ',0
		DB	'      ong-S   iong-Sӵ',0
		DB	'ע:ĸaeo˫,˫ĸմ,angΪag,engΪeg',0
		DB	'   apɵеƫԲ(ڶ)',0,0

S_SPDM		PROC	NEAR
		MOV	DI,OFFSET K_SPDM
		CALL	S_XSCK			;ʾ
		MOV	SI,OFFSET T_SP
		CALL	S_XSBT			;ʾ
		MOV	SI,OFFSET D_SP
		JMP	L_XSINRET		;ʾݲ
S_SPDM		ENDP
;----------------------------------------------------------------------------
T_XSYS		DB	'ʾ16ǰɫ',0
D_XSYS		DB	'\                ǰ',0,0
D_YS		DB	'                ',0

S_YS		PROC	NEAR
		MOV	DI,OFFSET K_YS
		CALL	S_XSCK			;ʾ
		MOV	SI,OFFSET T_XSYS
		CALL	S_XSBT
		MOV	SI,OFFSET D_XSYS
		CALL	S_CKXS102		;ʾݲ
		MOV	BH,'0'                  ;ɫ
L_YS1:
		INC	DH			;+1
		PUSH	DX
		CALL	S_XSKG			;ʾո
		CALL	S_XSKG
		CALL	S_XSZF			;ʾɫ
		CALL	S_XSKG
		CALL	S_XSKG
		CALL	S_XSYS			;ʾһ
		POP	DX
		INC	BH			;ɫ+1
		CMP	BH,'G'
		JZ	L_YS2
		CMP	BH,3AH
		JNZ	L_YS1
		ADD	BH,7
		JMP	SHORT L_YS1
L_YS2:
		JMP	L_INRET
S_XSYS:
		PUSH	BX
		MOV	SI,OFFSET D_YS		;ɫ
		MOV	BL,BH
		SUB	BL,'0'
		CMP	BL,9
		JBE	L_XY1
		SUB	BL,7
L_XY1:
		MOV	CL,4
		SHL	BL,CL			;ɫ
		MOV	CX,16
L_XY2:
		LODSB
		CALL	S_XSAL
		LODSB
		CALL	S_XSAL
		LODSB
		CALL	S_XSAL
		INC	BL			;ǰɫ+1
		LOOP	L_XY2
		POP	BX
		RET
S_XSKG:
		MOV	AL,' '
S_XSAL:
		PUSH	BX
		MOV	BH,AL
		CALL	S_XSZF
		POP	BX
		RET
S_YS		ENDP
;----------------------------------------------------------------------------
T_XSFS		DB	'ʾʽһ',0
D_XSFS		DB	'ʾʽ  ֱ   С     ɫ   ʾģ     ʾ',0
		DB	'',0
		DB	'    6    640200  2580   88   0,1   CGA,CGA25   CGA,EGA,VGA',0
		DB	'    9    640400  2580   816  0,1    HGA.COM        HGA',0
		DB	'  10H    640350  2580   814   16    EGA.COM      EGA,VGA',0
		DB	'  12H    640480  2680   816   16    VGA.COM        VGA',0
		DB	'  255    640480  3080   816  256    VGA.COM       SVGA',0,0

S_XSFS		PROC	NEAR
		MOV	DI,OFFSET K_XSFS
		CALL	S_XSCK			;ʾ
		MOV	SI,OFFSET T_XSFS
		CALL	S_XSBT
		MOV	SI,OFFSET D_XSFS
		JMP	L_XSINRET		;ʾݲ
S_XSFS		ENDP
;----------------------------------------------------------------------------
T_SL		DB	'ʸ',0
D_SL1		DB	' 0-(HZKSJSTJ)       8-(HZKSLLBJ) ',0
		DB	' 1-μ(HZKSLFSJ)       9-ڼ(HZKSLDHJ) ',0
		DB	' 2-(HZKSLHTJ)      10-κ(HZKSLWBJ) ',0
		DB	' 3-(HZKSLKTJ)      11-п(HZKSLXKJ) ',0
		DB	' 4-μ(HZKSLXBJ)      12-(HZKSLLSJ) ',0
		DB	' 6-ϸԲ(HZKSLY1J)      13-Ҧ(HZKSLYTJ) ',0
		DB	' 7-׼Բ(HZKSLY3J)      14-ڼ(HZKSLMHJ) ',0
		DB	' ',0
D_SL2		DB	'20-己(HZKSLSTF)      28-䷱(HZKSLLBF) ',0
		DB	'21-η(HZKSLFSF)      29-ڷ(HZKSLDHF) ',0
		DB	'22-己(HZKSLHTF)      30-κ(HZKSLWBF) ',0
		DB	'23-己(HZKSLKTF)      31-п(HZKSLXKF) ',0
		DB	'26-ϸԲ(HZKSLY1F)      32-귱(HZKSLHPF) ',0
		DB	'27-׼Բ(HZKSLY3F)      33-շ(HZKSLZYF) ',0
		DB	'            ',127,'ΪֿѰװ',0,0

S_SLZT		PROC	NEAR
		MOV	AX,357EH		;ȡINT7E
		INT	21H
		OR	BX,BX			;аװ?
		JZ	L_SLZT9
		XOR	DX,DX			;ȡREADSLװ״̬
		INT	7EH
		MOV	BX,ES
		CMP	BX,DX			;ǷREADSLģ?
		JNZ	L_SLZT9
		MOV	SI,AX
		MOV	DI,OFFSET D_SL1
		MOV	CX,0
		MOV	BX,19
L_SLZT1:
		LODS	WORD PTR ES:[SI]
		OR	AX,AX
		JZ	L_SLZT2
		MOV	BYTE PTR DS:[BX+DI],7FH
L_SLZT2:
		ADD	DI,46
		INC	CX
		CMP	CX,8
		JNZ	L_SLZT3
		MOV	BX,44
		MOV	DI,OFFSET D_SL1
L_SLZT3:
		CMP	CX,5
		JNZ	L_SLZT4
		ADD	SI,2
		INC	CX
L_SLZT4:
		CMP	CX,14
		JBE	L_SLZT1

		ADD	SI,10
		MOV	DI,OFFSET D_SL2
		MOV	CX,20
		MOV	BX,19
L_SLZT5:
		LODS	WORD PTR ES:[SI]
		OR	AX,AX
		JZ	L_SLZT6
		MOV	BYTE PTR DS:[BX+DI],7FH
L_SLZT6:
		ADD	DI,46
		INC	CX
		CMP	CX,28
		JNZ	L_SLZT7
		MOV	BX,44
		MOV	DI,OFFSET D_SL2
L_SLZT7:
		CMP	CX,24
		JNZ	L_SLZT8
		ADD	CX,2
		ADD	SI,4
L_SLZT8:
		CMP	CX,33
		JBE	L_SLZT5
L_SLZT9:
		PUSH	CS
		POP	DS
		PUSH	CS
		POP	ES
		MOV	DI,OFFSET K_SLZT
		CALL	S_XSCK			;ʾ
		MOV	SI,OFFSET T_SL
		CALL	S_XSBT
		MOV	SI,OFFSET D_SL1
		JMP	L_XSINRET		;ʾݲ
S_SLZT		ENDP
;----------------------------------------------------------------------------
T_ZXB		DB	'ͺֺű',0
D_ZXB		DB	'!ͱ!(`@A~x):',0
		DB	'A-2424   E-2424   I-2424   M-2424 ()',0
		DB	'B-4824   F-4824   J-4824   N-4824 (һ)',0
		DB	'C-2448   G-2448   K-2448   O-2448 (һ)',0
		DB	'D-4848   H-4848   L-4848   P-4848 (һ)',0
		DB	'Q-1616() R-3216() S-1632() T-3232()',0
		DB	'U-4040() V-4040() W-4040() X-4040()',0
		DB	'a-1624   e-1624   i-1624   m-1624 (뱶)',0
		DB	'b-3624   f-3624   j-3624   n-3624 (뱶)',0
		DB	'c-2436   g-2436   k-2436   o-2436 (뱶)',0
		DB	'd-3636   h-3636   l-3636   p-3636 (뱶)',0
		DB	'q-1624() r-3224() s-1648() t-3248() 24',0
		DB	'u-3232() v-3232() w-3232() x-3232()',0
		DB	'!ֺű!(180DPI.):0-9090',0
		DB	'1-7272 10-8080 11-6080 12-8060 13-5472 14-7254',0
		DB	'2-4848 20-6060 21-4580 22-8045 23-3648 24-4836',0
		DB	'3-4040 30-4444 31-3344 32-4433 33-3040 34-4030',0
		DB	'4-3232 40-3636 41-2736 42-3627 43-2432 44-3224',0
		DB	'5-2424 50-2828 51-2128 52-2821 53-1824 54-2418',0
		DB	'6-2020 60-2222 61-1622 62-2216 63-1520 64-2015',0
		DB	'7-1616 70-1818 71-1318 72-1813 73-1216 74-1612',0,0

S_ZXZH		PROC	NEAR
		MOV	DI,OFFSET K_ZXZH
		CALL	S_XSCK			;ʾ
		MOV	SI,OFFSET T_ZXB
		CALL	S_XSBT
		MOV	SI,OFFSET D_ZXB
		JMP	L_XSINRET		;ʾݲ
S_ZXZH		ENDP
;----------------------------------------------------------------------------
T_PB		DB	'ϵͳŰ',0
D_PB		DB	"  `',ҳ` - Ű(ȡسнҳųֵ1)",0
		DB	'        аŰҳպп,򱣳ԭֵ',0
		DB	'        ҳóʼӡҳ(ȱʡΪ1.Ϊ0򲻴ҳ)',0
		DB	'  `,` - ñо(ǰп)',0
		DB	'  `,,` - ñо(ǰп)',0
		DB	'  `[[ո` - Űڶк׼ӿո',0
		DB	'  `:` - ӡʼ.ԭŰӡĩҳҳ',0
		DB	'  `@` - õ(A~x,ĬA)',0
		DB	'  `@@ֺ,` - ֺ(PRTHɰֱDPIԶ)',0
		DB	'  `&о` - о(1~255,Ĭ20)',0
		DB	'  `^` - ַ(0~255,ּӱ,Ĭ0.λ:)',0
		DB	'  `#ҳ` - ҳ(λ.Ĭֽ)',0
		DB	'  `##` - ӡͻҳ(ǿƻҳ)',0
		DB	'  `[ַ` - ߿(0~2447,Ĭ0.ԵΪλ)',0
		DB	'  `]ַ` - п(1~2448,ԵΪλ.Ĭ)',0
		DB	": `'1&30",0
		DB	'    `,@W`ͨ  ֪',0
		DB	'    `@X',0
		DB	'        ֪ͨ,ҵλ,',0
		DB	'    29104շż6,105()ϰࡣ',0
		DB	'        ش֪ͨ',0
		DB	'    `,,@U칫  `',0,0

S_XTPB		PROC	NEAR
		MOV	DI,OFFSET K_XTPB
		CALL	S_XSCK			;ʾ
		MOV	SI,OFFSET T_PB
		CALL	S_XSBT
		MOV	SI,OFFSET D_PB
		JMP	L_XSINRET		;ʾݲ
S_XTPB		ENDP
;----------------------------------------------------------------------------
T_TSXS		DB	'2.13Lʾ',0
D_TSXS1 	DB	'Cɫ,ɫ] - ͼɫ          DX,Y] - ',0
		DB	'E] - ϻ                   U] - ϻ',0
		DB	'F] - »                   X߶] - »',0
		DB	'G] - »                   Y] - һ',0
		DB	'H] - ϻ                   Z] - ',0
		DB	'LյX,Y] - б(XзΪԵǰ)',0
		DB	'L/,Ƕ] - ǶȻ(Ϊ0,Ƶǰ)',0
		DB	'B,] - (ǰΪ½.=0,͸߶=0Ļ߿',0
		DB	'   Cָɫָɫ',0
		DB	'Vɫ,½X,Y,,,,,߿,ʽ] -       /,0=',0
		DB	'   :=1,=2,=3б,=4б.ʽ=1߿(Cָɫ)',0
		DB	'OԲX,Y,뾶,ʽ] - Բ(INT10K).CָɫԲͰԲ',0
		DB	'   :ʽ=0򻭰Բ,=1Բ,Բ',0
		DB	'OԲX,Y,뾶,ʽ,̰뾶,ʼ,ֹ,־] - Բ,ԲԲ(INT10V)',0
		DB	'   :ʽ=0ΪԲ,=1ΪԲ,ֵȱʡʱΪԲ)',0
		DB	'        ־=1,=0(ϵԲ). ɫCָ',0
		DB	'K] - ñ(1~255,ʵҪ/16)',0
		DB	'J] - ִ                       W...] - ()',0,0

D_TSXS2 	DB	'Pɫ,߽ɫ] - ',0
		DB	'M...] - ǰ׺Ƶǰ㵫߻    N...] - ǰ׺ߵƵǰ',0
		DB	'_,,] - ַл         |,,] - ַл',0
		DB	'#,,,,ʽ] - ַл(зʽ,4)',0
		DB	'Qɫ] - (ɫʼ.Сɫš򰴴ɫ)',0
		DB	'R] - (,żȡ)',0
		DB	'I] - ִINT10ж(:ΪĴ AH,AL,BH,BL,CH,CL,DH,DL)',0
		DB	'   һΪ255ʱ,ڶִежϺ,˳ΪAH,AL,BH...',0
		DB	'   зز40:0F0Hʼ14Ԫ,˳Ϊ:AX,BX,CX,DX,BP,SI,DI',0
		DB	'Sǰɫ,ɫ] - ַͺɫ',0
		DB	'*,,ַ,ǰɫ,ɫ] - Ļϵַ',0
		DB	'AչASCII] - ģ⹦ܼ(οSETUPܼ)',0
		DB	'%ܷ] - ()',0
		DB	'   :ܷΪ   t    ָ(Ĭ100,ÿӽ)',0
		DB	'        CDEFGAB  (ΪC)     1234567     0  ֹ',0
		DB	'        #         b      q  ˶       d  ˶',0
		DB	'        .           -  ӳ    _  ˷     =  ʮ',0
		DB	'   ע:˶ȡǰӳ㡢İ˷',0,0

D_TSXS3 	DB	' - ʱ λ:.Χ:0-4096      T01] - ʾл(10)',0
		DB	'^] - ,޴򿪻ر',0
		DB	'@Ͻַ,ɨ,ͼļ$] - ʾ16ɫPCXʽͼ',0
		DB	'~X1,Y1,X2,Y2,ͼļ$] - 16ɫPCXʽͼ',0
		DB	'   :X1ΪͼϽַ(0-79), Y1ΪϽ(0-479)',0
		DB	'        X2Ϊͼ½ַ(1-79), Y2Ϊ½(1-479)',0
		DB	'        ͼļչӦΪPCX,$',0
		DB	'[ַֻܷ] - ʾַֻ().Ϊܷ:',0
		DB	'   @  ָ(A)',0
		DB	'   ʽһ:ΪĸA-X,a-x(A-Pͬӡ,a~pΪA~P,Q~Tu~xΪ16)',0
		DB	'   ʽ:Ϊʸֵ(öŸ).INT10KINT10V',0
		DB	'       һΪ(Χ:4~639), ڶΪ(Χ:4~479)',0
		DB	'       Ϊʸ(ȱʡ򱣳ԭֵ)',0
		DB	'   ^  ַָ(0-255,ּӱ,Ϊ0)',0
		DB	'   &  ָм(0-255,Ϊ1)',0
		DB	'   _  ˮƽλ(0-639,Ϊ0)      |  ֱλ(0-479,Ϊ0)',0
		DB	'   *ɫ  ǰɫ(0-15,)      #ɫ  ɫ(0-15,Ϊ0)',0
		DB	'   \01  0Ϊֱԭͼ,1(Ϊ)',0,0
D_TSXS		DB	0			;ҳ

S_TSXS		PROC	NEAR
		MOV	SI,OFFSET D_TSXS1	;һҳ
		CMP	D_TSXS,0
		JZ	L_TSXS1
		MOV	SI,OFFSET D_TSXS2	;ڶҳ
		CMP	D_TSXS,1
		JZ	L_TSXS1
		MOV	SI,OFFSET D_TSXS3	;ҳ
L_TSXS1:
		PUSH	SI
		MOV	DI,OFFSET K_TSXS
		CALL	S_XSCK			;ʾ
		MOV	SI,OFFSET T_TSXS
		CALL	S_XSBT
		POP	SI
		CALL	S_CKXS102		;ʾ
		MOV	DH,D_TSXS
		MOV	DL,2			;ҳ
		CALL	S_PAGE			;ҳ
		MOV	D_TSXS,AL
		JMP	SHORT S_TSXS
S_TSXS		ENDP
;----------------------------------------------------------------------------
T_TSDY		DB	'ӡ',0
D_TSDY1 	DB	'`@` - õ(A~x,ĬA)',0
		DB	'`@` - ʸ(Ϊ:,,)',0
		DB	'    : ߷Χ1~255.μʸֱȱʡԭֵ)',0
		DB	'`@@ֺ,` - ֺ(PRTHɰֱDPIԶ)',0
		DB	'    ֺ:0-90,1-72,2-48,3-40,4-32,5-24,6-20,7-16(=.Ϊ180DPI)',0
		DB	'    ʮλΪ1~7,λ>0Ϊԭߵ3/4,żΪԭ3/4',0
		DB	'    λ<3Ϊ:1=80,2=60,3=44,4=36,5=28,6=22,7=18',0
		DB	'`@/\` - 򿪰ֱ(PRTH:@/ͺ־,@&о,@\ر)',0
		DB	'`@-=` - öֵĿпһ(-,Ĭ)(=)',0
		DB	'`@<>` - ö˫ӡ(Ĭϵ(PRTHЧ)',0
		DB	'`&о` - о(1~255)',0
		DB	'`&AB` - о൥λ:A-1/180Ӣ,B-1/120Ӣ(Ĭ.PRNT)',0
		DB	'`&C` - Ϊм1/180Ӣ(ʱ&мø.м+24=о)',0
		DB	'`&D` - Ϊм1/120Ӣ(ʱ&мø.м+16=о)',0
		DB	'`^` - ַ(0~255,ּӱ,Ĭ0.λ:)',0
		DB	'`#ҳ` - ҳ(PRNT:0-255.Ĭ0;PRTH:0~65535.Ĭϵҳֽ)',0
		DB	'`##` - ӡͻҳ(ǿƻҳ)[Ϊмʱ`E`]',0
		DB	'`*` - ҳ(0~255,Ĭ0.PRTH޴˹)',0,0

D_TSDY2 	DB	'`*` - ֽ(PRTH)',0
		DB	'`[ַ` - ߿(0~2447,Ĭ0.ԵΪλ)',0
		DB	'`]ַ` - п(1~2448,ԵΪλ.Ĭ)',0
		DB	'`~` - (0~2447.һЧ)',0
		DB	'`|` - ˮƽλ(1~2447.ǰЧ)',0
		DB	'`%0~7` - ñ:0,1,2,3,4,5б,6б,7',0
		DB	'`"ɫ` - ɫ(LQ2500M1570,0,1,2,3,4,5,6',0
		DB	'`$...$` - $ֱַʹӡ',0
		DB	'`>`ESC+I+> - õӡ(PRTH)',0
		DB	'`<`ESC+I+< - ˫ӡ(PRTH)',0
		DB	'`;` (ֺ) - óӡ()',0
		DB	'`\` (б) - ÷״ӡ',0
		DB	'`/` (б) - ϻߴӡ',0
		DB	'`_` (») - »ߴӡ',0
		DB	'`=` (Ⱥ) - ӡ(״̬,)',0
		DB	'`(` () - 90ȴӡ',0
		DB	'`)` () - 90ȴӡ',0
		DB	'`?` (ʺ) - ýת(״̬,϶)',0,0

D_TSDY3 	DB	'`+` (Ӻ) - ϱַ',0
		DB	'`-` () - ±ַ',0
		DB	'`` (̾) - ַ(״̬,϶)',0
		DB	'`.` (С) - ͣӡ(һ)',0
		DB	"`',ҳ` () - Ű(ȡسнҳųֵ1)",0
		DB	'    аŰҳպп,򱣳ԭֵ()',0
		DB	'    ҳóʼӡҳ(ȱʡΪ1.Ϊ0򲻴ҳ)',0
		DB	'`,` () - ñо(ǰп)',0
		DB	'`,,` () - ñо(ǰп)',0
		DB	'`[[ո` - Űڶк׼ӿո',0
		DB	'`:` (ð) - ӡʼ.ԭŰӡĩҳҳ',0
		DB	'ESC+I+N1+N2 - ͼӡ N1ֽ,N2ֽ.(N1*256+N2)*3ֽ',0
		DB	'ESC+I+A~x - (A~x)',0
		DB	'ESC+I+ - ȡӡ',0
		DB	'ESC+I+ - ָӡ(״̬)',0
		DB	'ESC+I+\  - ȡWSس(8DH0AH)',0
		DB	'ESC+I+/  - ָWSس8DHΪ0DH(״̬)',0
		DB	'ESC+W - ִĻ',0,0
D_TSDY		DB	0			;ҳ

S_TSDY		PROC	NEAR
		MOV	SI,OFFSET D_TSDY1	;һҳ
		CMP	D_TSDY,0
		JZ	L_TSDY1
		MOV	SI,OFFSET D_TSDY2	;ڶҳ
		CMP	D_TSDY,1
		JZ	L_TSDY1
		MOV	SI,OFFSET D_TSDY3	;ҳ
L_TSDY1:
		PUSH	SI
		MOV	DI,OFFSET K_TSDY
		CALL	S_XSCK			;ʾ
		MOV	SI,OFFSET T_TSDY
		CALL	S_XSBT
		POP	SI
		CALL	S_CKXS102		;ʾ
		MOV	DH,D_TSDY
		MOV	DL,2
		CALL	S_PAGE			;ҳ
		MOV	D_TSDY,AL
		JMP	SHORT S_TSDY
S_TSDY		ENDP
;----------------------------------------------------------------------------
T_INT10 	DB	'ʾжϹܵ',0
D_INT1		DB	'AH=0,AL=ʾʽ - ʾʽ',0
		DB	'AH=1,CH=ʼ,CL= - 趨С',0
		DB	'AH=2,BH=ҳ,DH=к,DL=к - 趨λ',0
		DB	'AH=3,BH=ҳ - ȡλ  :DH=к,DL=к,CX=С',0
		DB	'AH=4(οBIOSֲ) - ȡλ (ROM-BIOS)',0
		DB	'AH=5,AL=ҳ - ı䵱ǰʾҳ',0
		DB	'AH=6,AL=(=0ȫ),BH= - Ϲǰҳ',0
		DB	'     CH=Ͻк,CL=к,DH=½к,DL=к',0
		DB	'AH=7(ͬ) - ¹ǰҳ',0
		DB	'AH=8,BH=ҳ -ȡλַ  :AL=ASCII,AH=',0
		DB	'AH=9,AL=ASC,BH=ҳ,BL=,CX=ַ - ڵǰλʾַ',0
		DB	'AH=0AH(ȡǰλԭֵ,ͬ) - ڵǰλʾַ',0
		DB	'AH=0BH(οBIOSֲ) - Ļɫ(CGA)',0
		DB	'AH=0CH,AL=ɫ,CX=X,DX=Y - ָ괦д',0
		DB	'AH=0DH,CX=X,DX=Y - ָ괦  :AL=ɫ',0
		DB	'AH=0EH,AL=ASC - TTYʽʾַ',0
		DB	'AH=0FH - ȡǰʾʽ  :AL=ʾʽ,AH=ַ,BH=ǰҳ',0
		DB	'AH=10H(οBIOSֲ) - EGAVGAɫ (ROM-BIOS)',0
		DB	'AH=11H(οBIOSֲ) - EGAVGAַ (ROM-BIOS)ĬϽAL=30HЧ',0
		DB	'AH=12H(οBIOSֲ) - ȡEGAVGA״̬ (ROM-BIOS)',0,0

D_INT2		DB	'AH=13H,ES:BP=ַַ(AL=5),DX=λ,CX=,BH=ҳ - ʾַ',0
		DB	'    AL=0 BL=   ʾ겻',0
		DB	'    AL=1 BL=   ʾƴβ',0
		DB	'    AL=2   ʾ겻',0
		DB	'    AL=3   ʾƴβ',0
		DB	'    AL=4 BL=   0β ʾƴβ',0
		DB	'    AL=5 BL= Ļַ,ʾԭλò',0
		DB	'AH=14H - ʾв',0
		DB	'    AL=0 - 򿪻ʾ',0
		DB	'    AL=1,DL=ַ,CL= - ʾַ',0
		DB	'    AL=2,DL=ʾλ - ʾй궨λ',0
		DB	'    AL=3,DL=ַ - ʾַDLƽ  ܷ78Ч',0
		DB	'    AL=4 - رʾ',0
		DB	'    AL=5,BH=ʾик(VGAЧ),BL=ʾйɫ(=0޹,VGA)',0
		DB	'    AL=6 - ȡʾ  AL=ʾʽ, AH=ɫ, BH=ʾиλ',0
		DB	'           BL=4ֱд,=0, CL=ʾ, CH=ÿɨ',0
		DB	'           SI=-1, DI=-1, BP=ʾ',0
		DB	'           DL=ʾƲ,DH=ǰʾλ',0
		DB	'      DL:λ3=0:16,λ0=0,0',0
		DB	'         λ7=1ֱд,λ6=1ʾ,λ5=1չַ,λ4-ʾʽ>5',0,0

D_INT3		DB	'    AL=7 - öʾʽBH',0
		DB	'    AL=8 - λDXַʾ',0
		DB	'    AL=9 - λDXʾַBH, ΪBL, CX=0ַʾ,0ʾ',0
		DB	'    AL=0AH - ʾָλDLʾBLBP:SIĵ64ֽ',0
		DB	'    AL=0BH - ˸  BH=0,0˸',0
		DB	'    AL=0CH - ȡַ  BX:AX (+25*80*2չַ׵ַ)',0
		DB	'    AL=0DH - ֱдBH  ȡֵΧ1-8',0
		DB	'    AL=0EH - ȡƱתַ BX:AX',0
		DB	'    AL=0FH - ָλDXʾӿַDS:SI(0β,ΪBL)',0
		DB	'    AL=10H - 򿪵ڶʾ BL=ָɫ(VGA,ͬ)',0
		DB	'    AL=11H - ڵڶʾʾַDL CL=,BL=ɫ',0
		DB	'    AL=12H - ڶʾй궨λDL',0
		DB	'    AL=13H - ڵڶʾʾַDLƽ BL=ɫ',0
		DB	'    AL=14H - رյڶʾ',0
		DB	'AH=15H,AL=1,=0ʾ - ʾ',0
		DB	'AH=16H,DX=(ַDH=0),BP:BX=дַ - ʾģ',0
		DB	'    :ַ16ֽ,32ֽ(0-15ֽΪ,16-31ΪҰ)',0
		DB	'AH=17H,AL=0ȡ,0 - ȡ',0
		DB	'AH=18H - ϵͳ',0
		DB	'    AL=0ʶ            AL=1ʶ',0,0

D_INT4		DB	'    AL=2Ըλ        AL=3',0
		DB	'    AL=4ʾʽ  AL=5ʾʽ',0
		DB	'    AL=8˸      AL=9˸(AH=10H,BL=3)',0
		DB	'    AL=0AHرֱд      AL=0BHֱָд',0
		DB	'    AL=0CHƱʽBH',0
		DB	'    AL=0DH BH=1AH=1, =0̶СBL',0
		DB	'    AL=0EHʾʽ>=6Ϊ AL=0FHָԭʽ',0
		DB	'    AL=10Hַ˸      AL=11H           AL=12H',0
		DB	'    AL=13HĻ          AL=14Hرʱʾ   AL=15Hָʱʾ',0
		DB	'    AL=16HĻɫ:BH-ǰ,BL-,CH-߿(EGAVGA)',0
		DB	'    AL=17H          AL=18H18ģʽ   AL=19Hָ16ģʽ',0
		DB	'    AL=1AHַֹ    AL=1BHַ(AH=11H)',0
		DB	'    AL=1CH-INT10AH=6~10ֱдʽ    AL=1DHָжϷʽ',0
		DB	'    AL=1EHִINT10ʼԼĴ    AL=1FHʼ',0
		DB	'AH=19H,AL=0ر,=1 - Կ',0
		DB	'    AL=2 - Բʼ(GW޴˹)',0
		DB	'    AL=3,װAL=83H(L),=84H(K),=85H(V),ES=ģ - ذװ״̬',0
		DB	'    AL=4 - ֹͣ',0
		DB	'AH=0FFH - ȡװʾģ',0
		DB	'    :AH=0,AL="V"-VGA,="E"-EGA,="H"-HGA,="C"-CGA,="c"-CGA11',0,0
D_INT10 	DB	0			;ҳ

S_INT10 	PROC	NEAR
		MOV	SI,OFFSET D_INT1	;һҳ
		CMP	D_INT10,0
		JZ	L_INT10
		MOV	SI,OFFSET D_INT2	;ڶҳ
		CMP	D_INT10,1
		JZ	L_INT10
		MOV	SI,OFFSET D_INT3	;ҳ
		CMP	D_INT10,2
		JZ	L_INT10
		MOV	SI,OFFSET D_INT4	;ҳ
L_INT10:
		PUSH	SI
		MOV	DI,OFFSET K_INT10
		CALL	S_XSCK			;ʾ
		MOV	SI,OFFSET T_INT10
		CALL	S_XSBT
		POP	SI
		CALL	S_CKXS102		;ʾ
		MOV	DH,D_INT10
		MOV	DL,3
		CALL	S_PAGE			;ҳ
		MOV	D_INT10,AL
		JMP	SHORT S_INT10
S_INT10 	ENDP
;----------------------------------------------------------------------------
T_INT		DB	'̺ʹӡжϵ',0
D_INT11 	DB	'    !INT 16̹!',0
		DB	'AH=0,AL=ַ - ',0
		DB	'AH=1,Z־=0ַ,=1ַ - ̻',0
		DB	'AH=2,AL=ת״̬ - ȡǰת״̬',0
		DB	'     : λ0-Shift, 1-Shift, 2-Ctrl,3-Alt',0
		DB	'             4-ScrollLock, 5-NumLock, 6-CapsLock, 7-INS',0
		DB	'AH=3,AL=5 - ûٶȺӳ(ֻ286Ч)',0
		DB	'     BH=ӳ,=0Ϊ250(С). BL=ٶ,=0Ϊ30ַ/()',0
		DB	'AH=4,AL=ת״̬(ͬAH=2) - õǰת״̬',0
		DB	'AH=5,CL=ַ,CH=ɨ - ̻дַ(ֻ286Ч)',0
		DB	'AH=10H ͬAH=0',0
		DB	'AH=11H ͬAH=1',0
		DB	'AH=12H ͬAH=2',0
		DB	'AH=20H,BP=,CX=,DX=.(0-3װ,4-7ȡ)',0
		DB	'     AL=04ⲿ,=15,=26ģ,=37˫ƴ',0
		DB	'AH=21H,AL=չASCII - ģ⹦ܼ',0
		DB	'AH=22H,DX= - ȡ˫ƴ  AL=˫ƴһ,AH=˫ƴڶ',0
		DB	'AH=24H,AL=0,=1 - ˳ֺܿ(ɹرӰĻʾĹ)',0
		DB	'AH=25H,BL=ɫ - ʾ汾Ϣ',0
		DB	'AH=27H, AL=0 ȡ뷽ʽDL, AL=1 ú뷽ʽ DL=뷽ʽ',0
		DB	'   DL=0ΪASCIIʽ,λ0λ,λ1β,λ2ƴ,λ3˫ƴ,λ4,λ7籨',0,0

D_INT12 	DB	'AH=29H - ʾ',0
		DB	'AH=2AH,AL=0:д,=1ȡ - ȡðģַBP:SI',0
		DB	'AH=2BH,AL=INT16AHֵ,AX - ִROM-BIOS INT 16H',0
		DB	'AH=2FH - :ģжBP:SIʲַBP:DI2.13װ·',0
		DB	'              AX=44H-װCKBD, =39H-װCKB9',0
		DB	'      :[DI]-ⲿ,[DI+6]-,[DI+18]-˫ƴ',0
		DB	'    !INT 17ӡ!',0
		DB	'AH=0,AL=ַ,AH=ӡ״̬ -  ӡ',0
		DB	'AH=1,DX=ӡں,AH=ӡ״̬ - ʼӡ',0
		DB	'AH=2,DX=ӡں,AH=ӡ״̬ - ȡӡ״̬',0
		DB	'AH=3,AL=0ֱʹӡ,=1ϵͳִӡ - ôӡģʽ',0
		DB	'AH=4,AL=0ر,=1 - ӡܿ',0
		DB	'AH=5,AL=ַ - ֱַAL',0
		DB	'AH=6 - ȡӡ  :ES=פڴεַ',0
		DB	'        AH=ֽ,AL=ӡ,CH=ַ,CL=о,DL=ĸ',0
		DB	'        DH="N"ΪPRNT, ="H"ΪPRTH',0
		DB	'        SI=߿,DI=п,BP8λ=Ϳ,BP8λ=͸',0
		DB	'        BL=ֽ1:λ0-21~7,λ3',0
		DB	'        BH=ֽ2:λ0-,λ1-»,λ2-ϻ,λ3-',0
		DB	'                     λ4-,λ5-ϱ,λ6-±',0
		DB	'AX=-1(65535) - ȡװ״̬ װ򷵻:AX=-2130H,DX:BX=BIOS INT17',0,0

D_INT13 	DB	'    !INT 2F·ж!(ϵͳù)',0
		DB	'AX=4A06H,SI=0 ˳ϵͳ, =1 ģ, =2 ģ',0
		DB	'           =3 :AX=0,BX=4A06Hϵͳװ,AXδװ',0
		DB	'              CX:DX-BIOSжϱ(1ֽжϺ,4ֽж),[DX-2]-ж',0
		DB	'    !INT 7A1616ֿ   INT 7C3232ֿ!',0
		DB	'    !INT 7B2424ֿ   INT 7D4040ֿ!',0
		DB	'AH=(λ0-1,2-3,4-5,6-7',0
		DB	'     λ6-7=0,λ4-5=01Ϊ24,=10Ϊ16,=11Ϊ1624',0
		DB	'     λ4-5:=00,=01,=10,=11)',0
		DB	'   BH=⹦(λ1ϻ,2»,3,4,5ϱ,6±,7ת24)',0
		DB	'   BL=ǰӡ(򳬹24ʱӡ,BLָʾǵڼ,24ʱΪ0)',0
		DB	'   DX=,DH=0DL=ASCII(ַ)',0
		DB	'   DS:SIʼַ,CX=ֽ',0
		DB	'    !INT 7Eʸֿ! DX=0DX:BXַ,AX=ַֿ',0
		DB	'AX=Ϳ,BX=,CX=͸߶,DX=(ַDH=0)',0
		DB	'SI=ʼ,DI=ֹ,BP=(λ0=0ˮƽ,=1ֱ,λ11=1±,λ12=1ϱ',0
		DB	'         λ13=0ת90,=1ת180,λ14=0,=1,λ15=0ת,=1ת)',0
		DB	' DX:BX=󻺳ַ,AX=ʵʿ,CX=ʵʸ߶',0
		DB	'    !INT 7F1616ʾֿ!(ˮƽ)',0
		DB	'DX=, DX=ʼ(ƫ=0)',0,0
D_QTINT 	DB	0			;ҳ

S_QTINT 	PROC	NEAR
		MOV	SI,OFFSET D_INT11	;һҳ
		CMP	D_QTINT,0
		JZ	L_QTINT
		MOV	SI,OFFSET D_INT12	;ڶҳ
		CMP	D_QTINT,1
		JZ	L_QTINT
		MOV	SI,OFFSET D_INT13	;ҳ
L_QTINT:
		PUSH	SI
		MOV	DI,OFFSET K_QTINT
		CALL	S_XSCK			;ʾ
		MOV	SI,OFFSET T_INT
		CALL	S_XSBT
		POP	SI
		CALL	S_CKXS102		;ʾ
		MOV	DH,D_QTINT
		MOV	DL,2
		CALL	S_PAGE			;ҳ
		MOV	D_QTINT,AL
		JMP	SHORT S_QTINT
S_QTINT 	ENDP
;----------------------------------------------------------------------------
T_GNJ		DB	'ϵͳʹ÷',0
D_GNJ		DB	'ִ:ʹüģܼ(F11)',0
		DB	'˳:<Esc>',0
		DB	'˳ģ:  DOS¼ LHELP ӿո',0
		DB	'Ӵڷ˵:ļ',0
		DB	'  Ӵڴ<Esc>ֱ˳,ٴΰ<F11>ֱӽô.',0
		DB	'<Alt>+<Enter>(С):ʾʾ¸ӹ:',0
		DB	'  <Alt>+ƶ---ƶǰ',0
		DB	'  <Alt>+<Ins*>--ɫ+1  <Alt>+<Del*>--ɫ-1',0
		DB	'  <Alt>+<Home*>-ǰɫ+1  <Alt>+<End*>--ǰɫ-1',0
		DB	'  <Alt>+<PgUp*>-߿ɫ+1  <Alt>+<PgDn*>-߿ɫ-1',0
		DB	'  <Alt>+<+>----ô  (*רùϷ)',0,0

S_GNJ		PROC	NEAR
		MOV	DI,OFFSET K_GNJ
		CALL	S_XSCK			;ʾ
		MOV	SI,OFFSET T_GNJ
		CALL	S_XSBT
		MOV	SI,OFFSET D_GNJ
		JMP	L_XSINRET		;ʾݲ
S_GNJ		ENDP

;****************************************************************************
BEGIN:
		XOR	BP,BP
		MOV	AX,1406H		;ȡʾ
		INT	10H
		OR	BP,BP
		JNZ	L_S5
		MOV	DX,OFFSET NO213
		JMP	SHORT L_ERR
L_S5:
		CMP	CL,25			;25?
		JAE	L_S6
		MOV	DX,OFFSET NO25		;С25,
		JMP	SHORT L_ERR
L_S6:
		MOV	D_MODE,AL		;
		CMP	AL,9			;е?
		JA	L_S10
		MOV	D_CDXZ,70H
L_S10:
		XOR	BP,BP
		MOV	AX,2A01H		;ȡģ?
		INT	16H
		OR	BP,BP
		JZ	L_S20
		CMP	BYTE PTR DS:[80H],0	;в˳?
		JZ	L_S12
		MOV	ES,BP
		XOR	BP,BP
		XOR	SI,SI
		MOV	AX,2A00H		;ժģ
		INT	16H
		MOV	AH,49H			;屾ģ
		INT	21H
		MOV	ES,ES:[2CH]
		MOV	AH,49H			;廷
		INT	21H
		MOV	DX,OFFSET D_TVIU
		JMP	SHORT L_ERR
L_S12:
		MOV	DX,OFFSET D_YJCZ
L_ERR:
		MOV	AH,9
		INT	21H
		INT	20H
L_S20:
		MOV	ES,DS:[2CH]		;
		XOR	SI,SI
		XOR	AX,AX
L_S122:
		CMP	ES:[SI],AX		;һβ?
		JZ	L_S124
		INC	SI
		JMP	SHORT L_S122
L_S124:
		ADD	SI,4
		MOV	D_FILE,SI

		MOV	BP,CS
		MOV	SI,OFFSET L_HELP
		MOV	AX,2A00H		;ӵģ
		INT	16H
		MOV	DX,OFFSET MSG
		MOV	AH,9
		INT	21H
		MOV	DX,OFFSET D_END
		INT	27H

MSG		DB	'2.13L ϵͳ v2.0 19988',13,10
		DB	'ʹüģܼ(F11)',13,10
		DB	'    DOS¼ LHELP ӿո:˳ģ',13,10,'$'

D_TVIU		DB	'˳!',7,13,10,'$'
D_YJCZ		DB	'Ѿ!',7,13,10,'$'
NOHELP		DB	'δװ!',7,13,10,'$'
NO213		DB	'NOT INSTALLED 2.13 SYSTEM!',7,13,10,'$'
NO25		DB	'CGA11ʾģ鲻ʹñ!',7,13,10,'$'
D_INPUT 	DB	5 DUP(0)

D_END	EQU	$

CSEG		ENDS
		END	START
